<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	<section>
		<div class="container-fluid " style="">
			<div class="row">
				<!-- Description service -->
				<div class="col-12" style="">
					<h2>
						Prestation n°
						<h:outputText value="#{mbService.serviceSelect.nbService}"></h:outputText>
					</h2>
					<div>
						<h3 style="text-align: center;">Recapitulatif de la
							prestation</h3>
					</div>
					<div
						style="display: flex; justify-content: space-evenly; font-size: 20px; padding-bottom: 1em; margin-bottom: 1em; border-bottom: solid #457B9D 1px;">
						<p>
							<span class="color-green-primary" style="font-size: 20px;">Prix:
							</span>
							<h:outputText value="#{mbService.serviceSelect.cost}" />
							€
						</p>
						<p>
							<span class="color-green-primary" style="font-size: 20px;">Date
								de debut: </span>
							<h:outputText value="#{mbService.serviceSelect.starting}" />
						</p>
						<p>
							<span class="color-green-primary" style="font-size: 20px;">Date
								de fin: </span>
							<h:outputText value="#{mbService.serviceSelect.ending}" />
						</p>
					</div>
				</div>
				<!-- terrain + troupeau detail de la prestation -->
				<div class="col-8 mx-auto">
					<div class="header-terrain " style="display: flex;">

						<!-- container left	 -->
						<div class="container">
							<div class="row">
								<!-- colonne terrain -->
								<div class="col-6 mx-auto">
									<h3>Terrain</h3>
									<h4 style="text-align: center;">
										<h:outputText value="#{mbService.serviceSelect.field.name}"
											style="text-transform:capitalize;" />
									</h4>

									<h:outputText styleClass="image-terrain"
										style="background-image:url(#{mbService.serviceSelect.field.photo})!important; display:block; width:100%; height:230px;background-position:bottom;"></h:outputText>


									<div class="body-terrain-container">

										<div class="" style="text-align: justify;">
											<ul class="list-group">
												<li class="list-group-item"><span
													class="color-green-primary">Adresse: </span> <h:outputText
														value="#{mbService.serviceSelect.field.adress}" /></li>
												<li class="list-group-item"><span
													class="color-green-primary">Ville: </span> <h:outputText
														value="#{mbService.serviceSelect.field.zipcode.label}" />
												</li>

											</ul>
											<ul class="list-group"
												style="justify-content: normal; flex-direction: column; padding-top: 1em;">
												<li class="list-group-item"><span
													class="color-green-primary">Surface: </span> <h:outputText
														value="#{mbService.serviceSelect.field.surface}" /> m2</li>

												<li class="list-group-item"><span
													class="color-green-primary">Composition: </span> <h:outputText
														value="#{mbService.serviceSelect.field.composition.label}" />
												</li>

												<li class="list-group-item"><span
													class="color-green-primary">Humidité: </span> <h:outputText
														value="#{mbService.serviceSelect.field.humidity.label}" />
												</li>

												<li class="list-group-item"><span
													class="color-green-primary">Hauteur herbe: </span> <h:outputText
														value="#{mbService.serviceSelect.field.glassheight.label}" />
												</li>

												<li class="list-group-item"><span
													class="color-green-primary">Vegetation: </span> <h:outputText
														value="#{mbService.serviceSelect.field.vegetation.label}" />
												</li>

												<li class="list-group-item"><span
													class="color-green-primary">Pente: </span> <h:outputText
														value="#{mbService.serviceSelect.field.slope.label}" /></li>

												<li class="list-group-item"><span
													class="color-green-primary">Cloture: </span> <h:outputText
														value="#{mbService.serviceSelect.field.enclosure.label}" />
												</li>

												<li class="list-group-item"><span
													class="color-green-primary">Eau à disposition: </span> <h:outputText
														value="#{mbService.serviceSelect.field.water.label}" /></li>

												<li class="list-group-item"><span
													class="color-green-primary">Abris: </span> <h:outputText
														value="#{mbService.serviceSelect.field.shelter.label}" />
												</li>

											</ul>
										</div>
									</div>


								</div>

								<!-- colonne troupeau -->
								<div class="col-6 mx-auto">
									<h3>Troupeau</h3>
									<h4 style="text-align: center;">
										<h:outputText value="#{mbService.serviceSelect.herd.name}"
											style="text-transform:capitalize;" />
									</h4>
									
									<h:outputText styleClass="image-terrain"
										style="background-image:url(#{mbService.serviceSelect.herd.photo})!important; display:block; width:100%; height:230px;background-position:bottom;"></h:outputText>

									<div class="body-terrain-container">

										<div class=" "
											style="text-align: justify;">
											<ul class="list-group">
												<li class="list-group-item">
													<span class="color-green-primary">Propriétaire: </span>
													<h:outputText
														value="#{mbService.serviceSelect.herd.account.name}" />
												</li>
												<li class="list-group-item">
													<span class="color-green-primary">Adresse: </span>
													<h:outputText
														value="#{mbService.serviceSelect.herd.adress}" />
												</li>
												<li class="list-group-item">
													<span class="color-green-primary">Ville: </span>
													<h:outputText
														value="#{mbService.serviceSelect.herd.zipcode.label}"></h:outputText>
												</li>

											</ul>
											<ul class="list-group"
												style="padding-top: 1em;">
												<li class="list-group-item">
													<span class="color-green-primary">Race: </span>
													<h:outputText
														value="#{mbService.serviceSelect.herd.race.label}"></h:outputText>
												</li >
												<li class="list-group-item">
													<span class="color-green-primary">Taille du
														troupeau: </span>
													<h:outputText value="#{mbService.serviceSelect.herd.seize}"></h:outputText>
												</li >
											</ul>
										</div>

									</div>

								</div>
							</div>
						</div>




					</div>
				</div>

				<!-- carte autres prestation right -->
				<div class="col-4">
					<f:ajax render=":contentPage">
						<h:form>
							<h:commandLink
								styleClass=" btn btn-warning text-white #{mbService.classEleveur}"
								value="" action="#{mbService.finish(ServicePageMBean)}">
								<em class="fas fa-sign-in-alt"></em>Terminer</h:commandLink>
						</h:form>
					</f:ajax>
					<h3>Pointage</h3>
					<table class="table">
						<thead>
							<tr>
								<th scope="col">#</th>
								<th scope="col">Date</th>
							</tr>
						</thead>
						<tbody>
							<ui:repeat var="c" value="#{mbService.getAllClocking()}"
								varStatus="status">
								<tr>
									<th scope="row">#{c.id}</th>
									<td>#{c.done}</td>
								</tr>
							</ui:repeat>

						</tbody>
					</table>

					<f:ajax render=":contentPage">
						<h:commandLink
							styleClass=" btn btn-warning text-white #{mbService.classEleveur}"
							style="margin-top:1em; width:100%" value="Déclarer"
							action="#{mbService.addClocking(ServicePageMBean)}">
						</h:commandLink>

					</f:ajax>
					<f:ajax render=":contentPage">
						<h:commandLink styleClass=" btn btn-warning text-white "
							style="margin-top:1em; margin-bottom:1em; width:100%"
							value="Incident"
							action="#{ServicePageMBean.setServiceViewPopup('declareIncident')}">
						</h:commandLink>

					</f:ajax>


					<!-- remplire liste des incident -->
					<h3>Incident</h3>
					<table class="table">
						<thead>
							<tr>
								<th scope="col">#</th>
								<th scope="col">Date</th>
								<th scope="col">Statut</th>
								<th scope="col"></th>
							</tr>
						</thead>
						<tbody>
							<ui:repeat var="i" value="#{mbService.getAllIncident()}"
								varStatus="status">
								<tr>
									<th scope="row">#{i.id}</th>
									<td>#{i.starting}</td>
									<td>#{i.description}</td>
									<td><f:ajax render=":contentPage">
											<h:form>
												<h:commandLink styleClass=" btn btn-warning text-white "
													value="Cloture"
													action="#{mbService.closeIncident(ServicePageMBean, i)}">
												</h:commandLink>
											</h:form>
										</f:ajax></td>
								</tr>
							</ui:repeat>
							<ui:repeat var="ic" value="#{mbService.getAllIncidentClose()}"
								varStatus="status">
								<tr>
									<th scope="row">#{ic.id}</th>
									<td>#{ic.starting}</td>
									<td>#{ic.description}</td>
									<td>Fini</td>
								</tr>
							</ui:repeat>
						</tbody>
					</table>

				</div>
			</div>
		</div>
	</section>
</ui:composition>